package s6.suiviRegime.service;
import s6.suiviRegime.dao.HibernateDao;
import s6.suiviRegime.modele.AlimentationConseil;
import s6.suiviRegime.modele.Sport;
import s6.suiviRegime.modele.SportConseil;

public class MultiService {
	private HibernateDao dao;
	private MultiService(){
		if(dao == null) dao = new HibernateDao();
	}
	private static class Holder
	{		
		private final static MultiService instance = new MultiService();
	}
	public static MultiService getInstance(){
		return Holder.instance;
	}
	
	public AlimentationConseil getAlimentationConseil(String alimentation) throws Exception{
		try{
			int id = Integer.parseInt(alimentation.trim());
			AlimentationConseil s = new AlimentationConseil(id);
			dao.findById(s);
			return s;
		}catch(NumberFormatException e){
			throw new Exception("Conseil d'alimentation introuvable, valeur incorrecte");
		}
	}
	
	
	
	public void updateSport(String id, String libelle, String activite) throws Exception{
		Sport s = getSport(id);
		s.setLibelle(libelle);
		s.setActivite(activite);
		dao.update(s);
	}
	
	public void deleteSportConseil(String id) throws Exception{
		dao.delete(getSportConseil(id));
	}
	
	public AlimentationConseil getRandomTips(){
		AlimentationConseil conseil = new AlimentationConseil();
		return (AlimentationConseil)dao.getRandom(conseil);
	}
}
