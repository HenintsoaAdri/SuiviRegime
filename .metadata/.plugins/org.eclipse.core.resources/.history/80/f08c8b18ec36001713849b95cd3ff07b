package s6.suiviRegime.modele;

import java.util.Date;
import java.util.List;

import s6.suiviRegime.utilitaire.DateUtil;

public class AnalyseUtilisateur extends Regime{
	
	private int minuteSportTotal;
	private float poidsTotalPerdu;
	private int jourRestant;
	private int jourPasse;
	
	
	public AnalyseUtilisateur() {
		super();
	}
	public AnalyseUtilisateur(int id, Utilisateur utilisateur, Date debut, Date fin, float poidsObjectif) {
		super(id, utilisateur, debut, fin, poidsObjectif);
	}
	public AnalyseUtilisateur(int id) {
		super(id);
	}

	public AnalyseUtilisateur(int id, Utilisateur utilisateur, Date debut, Date fin, float poidsObjectif,
			int minuteSportTotal, float poidsTotalPerdu, int jourRestant) {
		super(id, utilisateur, debut, fin, poidsObjectif);
		
		setMinuteSportTotal(minuteSportTotal);
		setPoidsTotalPerdu(poidsTotalPerdu);
		setJourRestant(jourRestant);
	}
	
	@Override
	public void setDebut(Date debut) {
		super.setDebut(debut);
		setJourRestant(DateUtil.getInstance().getBetweenNow(debut));
	}
	@Override
	public void setFin(Date fin) {
		super.setFin(fin);
		setJourRestant(-DateUtil.getInstance().getBetweenNow(fin));
	}
	
	@Override
	public void setSport(List<SportRegime> sport) {
		super.setSport(sport);
		int minuteSport = 0;
		for(SportRegime s : sport){
			minuteSport += s.getRythme();
		}
		setMinuteSportTotal(minuteSport);
	}
	
	@Override
	public void setPoids(List<Poids> poids) {
		super.setPoids(poids);
		if(poids != null && !poids.isEmpty()){
			setPoidsTotalPerdu(getPoidsInitial() - poids.get(poids.size()-1).getValeur());
		}
	}
	public int getMinuteSportTotal() {
		return minuteSportTotal;
	}
	public void setMinuteSportTotal(int minuteSportTotal) {
		this.minuteSportTotal = minuteSportTotal;
	}
	public float getMinuteSportParSemaine(){
		float minute = getMinuteSportTotal()/(getJourPasse()/7f);
	}
	
	public float getPoidsTotalPerdu() {
		return poidsTotalPerdu;
	}
	public void setPoidsTotalPerdu(float poidsTotalPerdu) {
		this.poidsTotalPerdu = poidsTotalPerdu;
	}
	
	public int getJourRestant() {
		return jourRestant;
	}
	public void setJourRestant(int jourRestant) {
		this.jourRestant = jourRestant;
	}

	public int getJourPasse() {
		return jourPasse;
	}
	public void setJourPasse(int jourPasse) {
		this.jourPasse = jourPasse;
	}
}
