<%@ include file="../includes/header.jsp" %>
<%@page import="java.util.List"%>
<% Utilisateur user = (Utilisateur)request.getAttribute("user");
	BaseModelePagination liste = (BaseModelePagination)request.getAttribute("conseil");
	int pageNumero = (int)request.getAttribute("page");
%>
         <div id="page-inner">
             <div class="row">
             	<div class="col-xs-12">
             		<h2>Conseil</h2>
             		<p class="text-muted">
             			Les Poids affich&eacute;s sont la liste des poids enregistr&eacute;s pour le r&eacute;gime actif. 
             			<br>Activez le régime que vous voudriez suivre pour pouvoir inscrire et suivre les poids le concernant.
             			<br>Si aucun r&eacute;gime n'est encore disponible, n'h&eacute;sitez pas &agrave; en cr&eacute;er un !
             		</p>
             	</div>
             </div>
             <% if(liste.getListe() != null && !liste.getListe().isEmpty()){ %>
		     <div class="row">
		     	<div class="col-xs-12">                     
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            &Eacute;volution de votre poids
                        </div>
                        <div class="panel-body">
                            <div id="evolution-chart"></div>
                        </div>
                    </div>            
                </div>
             	<div class="col-xs-12">
					<div class="panel panel-default">
		                <div class="panel-heading">
		                    Liste des poids enregistr&eacute;s
		                </div>
		                <div class="panel-body">
		                    <div class="table-responsive">
		                        <table class="table table-hover">
		                            <thead>
		                                <tr>
		                                    <th>#</th>
		                                    <th>Date</th>
		                                    <th>Valeur</th>
		                                    <th></th>
		                                </tr>
		                            </thead>
		                            <tbody>
		                            <% for(Poids p : (List<Poids>)liste.getListe()){ %>
		                                <tr>
		                                    <td><% out.print(p.getId()); %></td>
		                                    <td><% out.print(p.getDateString()); %></td>
		                                    <td><% out.print(p.getValeur()); %> kg</td>
		                                    <td><a href="/SuiviRegime/Utilisateur/Poids/edit?poids.id=<% out.print(p.getId()); %>" class="btn btn-warning square-btn-adjust">modifier</a>
		                                    	<a href="/SuiviRegime/Utilisateur/Poids/delete?poids.id=<% out.print(p.getId()); %>" class="btn btn-danger square-btn-adjust">suprimer</a></td>
		                                </tr>
		                            <% } %>
		                            </tbody>
		                        </table>
		                         <ul class="pagination">
		                         	<% for(int i=0; i<liste.getNombrePage();i++){ %>
									<li class="<% if(i == pageNumero) out.print("active"); %>"><a href="?page=<% out.print(i+1); %>"><% out.print(i+1); %></a></li>
									<% } %>
								 </ul> 
		                        
						        <% if(request.getAttribute("erreur") != null){ %>    
								<div class="alert alert-danger alert-dismissable fade in">
								   <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
								   <strong>Probl&egrave;me!</strong> <% out.print(request.getAttribute("erreur")); %>
								</div>     
								<% } %>
		                    </div>
		                  </div>
		            	</div>
                <!-- /. ROW  -->
		        </div>  
	        </div>
	        <% }%>       
	    </div>
             <!-- /. PAGE INNER  -->

<!-- MORRIS CHART SCRIPTS -->
<script src="/SuiviRegime/js/morris/raphael-2.1.0.min.js"></script>
<script src="/SuiviRegime/js/morris/morris.js"></script>
             
<script type="text/javascript">
Morris.Line({
    element: 'evolution-chart',
    data: <% out.print(evolution); %>,
    xkey: 'y',
    ykeys: ['a'],
    labels: ['Poids'],
    hideHover: 'auto',
    resize: true
});
</script>             
<%@ include file="../includes/footer.jsp" %>